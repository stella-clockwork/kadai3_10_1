1.成果物要件
成果物：会員専用掲示板
要件：
○i.      会員登録ができること
○i-1.    名前とパスワードを入力することで登録できること
○i-1-1.  名前はIDとして用いるためユニークなもののみ受け付けること
○i-1-2.  パスワードはデータベース流出に備え、暗号化して保管すること
○i-1-3.  ユーザー名は60バイト以下の半角英数字+全角文字で構成されること(非機能要件)
○i-1-4.  パスワードは半角英数字で構成され、半角英小文字、大文字、数字をそれぞれ1つ以上含んでいて8文字以上100文字以下であること
    '/\A(?=.*?[a-z])(?=.*?[A-Z])(?=.*?\d)[a-zA-Z\d]{8,100}+\z/'

○i-2.    IDとパスワードを入力することでログインできること
i-2-1.  ログイン時のパスワード送信にはJavascriptを用いてチャレンジレスポンスを実装することで平文での通信を避けること
○i-3.    ログイン中でないユーザーに掲示板の機能を利用させないこと

○i-4.    会員登録時にメールアドレスを入力させ、そのアドレスにURLを添付したメールを送信してURLのクリック時に会員登録が完了するようバッファリングすること
○i-4-1.  仮登録から24時間で仮登録情報を削除すること
○i-4-2.  メールを送ったアドレスはデータベースに一時保存してメールの重複送信を避け、アンプ攻撃の踏み台にならないようにすること
○i-4-3.  適当なアドレスを24時間周期で送信してくるDoS攻撃を回避するため、名前とパスワードの入力はURLの先で行わせること
i-5.    パスワードが変更できること
i-5-1.  ログイン中にパスワード変更ボタンを右上に表示し、それを押すことで新しいパスワードを登録できること
i-5-2.  パスワードリセット機能をログインページにつけること
i-5-2-1.リセット時には登録メールアドレスにリセット用キーを送り、それを要求すること

○ii.     ログイン中のユーザーは掲示板に投稿を行えること
○ii-1.   文章を掲示板に投稿でき、投稿したユーザー名と投稿時間が保存されること
○ii-1-1. 本文は500バイト以内で半角英数字+全角文字+[+-*/(){}[]<>?!_.,%&#=;:@'" \r\n]の記号で構成されていること(非機能要件)
○ii-2.   投稿はそれぞれ<HR>で区切られ、スクロールボックス内に表示されること
○ii-2-1. 自分が行った投稿のみ、投稿者名をオレンジに変えて認識しやすくすること
○ii-3.   画像や動画を添付でき、それぞれ<img>タグと<video>タグで表示できること
○ii-3-1. コメントと並んで添付ファイルを1つ選択でき、動画や画像をアップロードできること
○ii-3-1-1.添付ファイルは画像を.jpg/.gif/.png、動画を.mp4に限定すること

○iii.    ユーザーは自分の投稿を削除できること
○iii-1.  削除フォームに投稿番号を入力することで、確認画面を経由して指定した投稿を削除できること

○iv.     ユーザーは自分の投稿を編集できること
○iv-1.   編集フォームに投稿番号を入力することで、確認画面を経由して指定した投稿を編集できること
○iv-2.   編集の際は、もともとのコメントをデフォルト値として表示してそれを編集できること

v.      セキュリティが保たれていること
○v-1.    文字コードはutf-8で統一されていること
○v-2.    不正な文字が入力されないようバリデーションを行うこと
○v-3.    SQLインジェクションが発生しないようプリペアステートメントを用いること
○v-4.    html表示時にはhtmlspecialchars()により適切なエスケープを行うこと
○v-5.    前回ログイン日時が表示されること
v-6.    セッションが安全に管理されること
v-6-1.  セッションIDがセッション固定化攻撃の影響を受けにくい形で管理されること
○v-7.    CSRFトークンにより投稿スクリプトへのCSRF対策が実施されていること

○vi.     データベースを用いて投稿を管理すること(非機能要求)
○vi-1.   MySQLにPDOをラッパーとしてアクセスすること
○vi-2.   トランザクションと排他制御を用いて操作矛盾が起こらないようにすること
○vi-3.   ユーザーの管理は$user_info = "users"、仮ユーザーの管理は$tentative_regist_table = "tentativeusers"、ログ管理は$default_board = "board"


2.ペルソナ分析
i.25歳男性、会社員
　仕事の情報交換用にインスタンスを立てて利用
　i-1.  テキストを打ち込めること
　i-2.  投稿を確認したボタンを押すと、確認済みユーザーに登録されて
　　　　確認済みユーザーの一覧を表示できること
　i-3.  

ii.30歳女性、専業主婦
　

iii.87歳男性、退職済み
　利用しない
